!function(a,b){function c(a){var b=a.data.children.map(function(a){return g.post(a.data)});h.posts.innerHTML=b.join("")}function d(a,b){return b in i?i[b]:(i[b]={},e.forEach(function(c){var d=Q.defer();reddit[c](b).limit(a).fetch(function(a){d.resolve(a)}),i[b][c]=d.promise}),i[b])}var e=["hot","new","top"],f={section:null,subreddit:a.location.hash.substr(1)||void 0,limit:25},g={post:doT.template(b.getElementById("posttmpl").text)},h={posts:b.getElementById("list"),menu:b.getElementById("menu"),sub:b.getElementById("subname")},i={};Object.observe(f,function(a){h.sub.innerHTML=f.subreddit?"/ "+f.subreddit:"",d(f.limit,f.subreddit)[f.section].then(function(a){c(a)})}),a.go=function(a){f.section=a,Array.prototype.forEach.call(h.menu.children,function(b){b.classList.contains(a)?b.classList.add("active"):b.classList.remove("active")})},a.addEventListener("hashchange",function(b){console.log("event ",b);var c=a.location.hash.substr(1);f.subreddit=c||void 0},!1),f.section="hot"}(window,document);